{"version":3,"file":"common.js","mappings":";;;;;;;;;;;;;;;AAAA;AAAA;AAEA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;;;;;;;;;;;;;;;;;AChBA;AAAA;AAEA;AAAA;AAAA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAGA;AACA;AAAA;AACA;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAEA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAjCA;AAAA;AAAA;AAmCA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEpEA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AAGA;AACA;AACA;AAAA;AACA;AAGA;;;;;;;;;;;;;;;;;;;;;;;ACxBA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACHA;AACA;AAAA;AAEA;AAAA;AAAA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAGA;AACA;AACA;AAAA;AACA;AAGA;;;;;;;;;;;;;;;;;;;;;;;ACzBA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAGA;AAEA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;;;;;;;;;;;;;;;;;ACtCA;AACA;AAEA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AAEA;AACA;AACA;AAAA;AAEA;AAAA;AASA;AAAA;AAAA;AAGA;AAAA;AAAA;AAEA;AAGA;;;;;;;;;;;;;;;;;;ACjCA;AACA;AAEA;AAAA;AAAA;AAEA;AACA;AAAA;AAGA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;;;;;;;;;;;;;;;;;;;;;ACdA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACFA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;;;;;;;;;;;;;;;;;;ACbA;AAEA;AAEA;AAAA;AAEA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAGA;;;;;;;;;;;;;;;;;;;;ACfA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAUA;AAAA;AAAA;AAAA;AARA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAhBA;AAAA;AAAA;AAkBA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AA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AAA;AACA;AACA;AAAA;AAAA;AAGA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAHA;AAKA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AACA;;;;;;;;;;;;;;;;;;;;AC5DA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAeA;AAAA;AAfA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACvOA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;ACFA;AAAA;AAgBA;;AAGA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AAIA;AAEA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACzCA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACjBA;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACLA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACXA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AAEA;;;;;;;;;;;;;;;;;;;;;ACVA","sources":["webpack://taro-mobile-react/._src_account_components_accountForm_components_SubmitBtn_index.tsx","webpack://taro-mobile-react/._src_account_components_accountForm_components_accountItem_index.tsx","webpack://taro-mobile-react/._src_account_components_accountForm_components_codeItem_components_codeWrap_index.tsx","webpack://taro-mobile-react/._src_account_components_accountForm_components_codeItem_components_index.tsx","webpack://taro-mobile-react/._src_account_components_accountForm_components_codeItem_index.tsx","webpack://taro-mobile-react/._src_account_components_accountForm_components_index.ts","webpack://taro-mobile-react/._src_account_components_accountForm_components_mobileItem_index.tsx","webpack://taro-mobile-react/._src_account_components_accountForm_components_passwordItem_index.tsx","webpack://taro-mobile-react/._src_account_components_accountForm_index.tsx","webpack://taro-mobile-react/._src_account_components_agreementEntry_index.tsx","webpack://taro-mobile-react/._src_account_components_index.ts","webpack://taro-mobile-react/._src_account_components_linkReg_index.tsx","webpack://taro-mobile-react/._src_account_components_topLogo_index.tsx","webpack://taro-mobile-react/._src_account_hooks_index.ts","webpack://taro-mobile-react/._src_account_hooks_useAccountForm_index.ts","webpack://taro-mobile-react/._src_account_hooks_useAgreement_index.ts","webpack://taro-mobile-react/._src_account_hooks_useAuth_index.ts","webpack://taro-mobile-react/._src_components_dynamicComponent.tsx","webpack://taro-mobile-react/._src_components_header.tsx","webpack://taro-mobile-react/._src_components_index.tsx","webpack://taro-mobile-react/._src_custom-tab-bar_basic.ts","webpack://taro-mobile-react/._src_hooks_index.ts","webpack://taro-mobile-react/._src_hooks_useMenu.ts","webpack://taro-mobile-react/._src_hooks_useMountedRef.ts","webpack://taro-mobile-react/._src_hooks_usePageConfig.ts","webpack://taro-mobile-react/._src_utils_auth.ts","webpack://taro-mobile-react/._src_utils_index.ts","webpack://taro-mobile-react/._src_utils_menuData.ts","webpack://taro-mobile-react/._src_utils_message.ts","webpack://taro-mobile-react/._src_utils_router.ts","webpack://taro-mobile-react/._src_utils_safeArea.ts","webpack://taro-mobile-react/._src_utils_validator.ts","webpack://taro-mobile-react/ignored|_Users_devil_Desktop_taro_taro-mobile-react_node_modules_object-inspect|._util.inspect"],"sourcesContent":["import { Button } from 'antd-mobile'\n\nexport const SubmitBtn = ({btnText}) => {\n\n  return (\n    <Button\n      block\n      shape='rounded'\n      size='large'\n      type='submit'\n      style={{\n        '--background-color': '#000000',\n        '--text-color': '#FFFFFF'\n      }}\n    >{btnText}</Button>\n  )\n}\n","import {Form, Input} from 'antd-mobile'\n\nexport const AccountItem = ({txt = '账号'}) => {\n  return (\n    <Form.Item\n      name='account'\n      rules={[\n        {\n          required: true,\n          message: `${txt}不能为空`\n        },\n      ]}\n    >\n      <Input\n        clearable\n        placeholder={`请输入${txt}`}\n      />\n    </Form.Item>\n  )\n}\n","import {useEffect, useRef, useState} from \"react\";\nimport {View} from '@tarojs/components';\nimport {mobileRex} from \"@/utils\";\nimport {sendPhone, checkUserPhone} from 'qj-b2c-api';\nimport {errMessage} from \"@/utils/message\";\n\nconst seconds = 60;\n\nexport const CodeWrap = ({form, type}) => {\n  const [timeFlag, setTimeFlag] = useState(false);\n  const [time, setTime] = useState<number>(seconds);\n  const timeRef = useRef<any>();\n  const [lock, setLock] = useState(false);\n\n  const getMobile = async () => {\n    if (lock) return;\n    const mobile = form.getFieldValue('mobile');\n    if (!mobile) errMessage('请填写手机号');\n\n    const pass = type === 'mobileLogin'? true:mobileRex.test(mobile);\n\n    if (!pass) {\n      errMessage('请填写正确的手机号');\n    } else {\n      setLock(true);\n      try {\n        const phone = {\n          userPhone: mobile\n        }\n        if(type === 'reg') {\n          const checkResult = await checkUserPhone(phone);\n          if(!checkResult.success) {\n            errMessage(checkResult.msg);\n            return\n          }\n        }\n\n        const result = await sendPhone(phone)\n        console.log(26, result);\n        setTimeFlag(true)\n        setTime(seconds);\n      } catch (err) {\n        console.log(err);\n      } finally {\n        setLock(false);\n      }\n    }\n  }\n\n  useEffect(() => {\n    if (time && time !== 0)\n      timeRef.current = setTimeout(() => {\n        setTime(time - 1);\n      }, 1000)\n    if (time === 0) setTimeFlag(false);\n    return () => {\n      clearTimeout(timeRef.current);\n    }\n  }, [time]);\n\n\n  return (\n    <View>\n      {\n        timeFlag ? <View>倒计时 {time} 秒</View> : <View onClick={getMobile}>获取验证码</View>\n      }\n    </View>\n  )\n}\n","export * from './codeWrap';\n","import {Form, Input} from 'antd-mobile'\nimport {CodeWrap} from \"./components\";\n\nexport const CodeItem = ({txt = '验证码', form, type}) => {\n  return (\n    <Form.Item\n      name='code'\n      extra={\n        <CodeWrap form={form} type={type} />\n      }\n      rules={[\n        {\n          required: true,\n          message: `${txt}不能为空`\n        }\n      ]}\n    >\n      <Input\n        maxLength={6}\n        clearable\n        placeholder={`请输入${txt}`}\n      />\n    </Form.Item>\n  )\n}\n","export * from './mobileItem';\nexport * from './codeItem';\nexport * from './passwordItem';\nexport * from './SubmitBtn';\nexport * from './accountItem';\n","import {Form, Input} from 'antd-mobile'\nimport {mobileRex} from \"@/utils\";\n\nexport const MobileItem = ({txt = '手机号'}) => {\n  return (\n    <Form.Item\n      name='mobile'\n      rules={[\n        {\n          required: true,\n          message: `${txt}不能为空`\n        },\n        {\n          pattern: mobileRex,\n          message: `请输入正确${txt}`\n        }\n      ]}\n    >\n      <Input\n        maxLength={11}\n        clearable\n        placeholder={`请输入${txt}`}\n      />\n    </Form.Item>\n  )\n}\n\n","import {useState} from \"react\";\nimport {View} from '@tarojs/components';\nimport {Form, Input} from 'antd-mobile'\nimport {IconMobile} from '@brushes/simulate-component';\n\nexport const PasswordItem = ({txt = '密码'}) => {\n  const [pwdType, setPwdType] = useState(true)\n\n  const checkPwd = (_: any, value: any) => {\n    if (value.length > 5 && value.length < 13) {\n      return Promise.resolve()\n    }\n    return Promise.reject(new Error(`请输入6-12位${txt}`));\n  }\n\n  return (\n    <Form.Item\n      name='password'\n      rules={[\n        {\n          required: true,\n          message: `${txt}不能为空`\n        },\n        {\n          validator: checkPwd\n        }\n      ]}\n      extra={\n        <View onClick={() => setPwdType(!pwdType)}>\n          {\n            pwdType ? <IconMobile value='yincang' /> : <IconMobile value='liulan' />\n          }\n        </View>\n      }\n    >\n      <Input placeholder={`请输入${txt}`} clearable type={pwdType ? 'password' : 'text'} />\n    </Form.Item>\n  )\n}\n","import {View} from '@tarojs/components';\nimport {Form} from 'antd-mobile';\n\nimport {MobileItem, CodeItem, PasswordItem, SubmitBtn, AccountItem} from \"./components\";\nimport {useAccountForm} from \"../../hooks\";\n\nexport const AccountForm = ({type, btnText, txt}: {type: string; btnText: string; txt?: string}) => {\n  const {form, onFinish} = useAccountForm(type)\n\n  return (\n    <View>\n      <Form\n        form={form}\n        footer={\n          <SubmitBtn btnText={btnText} />\n        }\n        onFinish={onFinish}\n      >\n        {\n          type === 'accountLogin' ? <AccountItem /> : null\n        }\n        {\n          ['forgetPwd', 'reg', 'mobileLogin'].includes(type) ? <MobileItem /> : null\n        }\n        {\n          type === 'reg' || type === 'mobileLogin' || type === 'forgetPwd' ? <CodeItem form={form} type={type} /> : null\n        }\n        {\n          type === 'reg' || type === 'accountLogin' || type === 'forgetPwd' ? <PasswordItem txt={txt} /> : null\n        }\n      </Form>\n    </View>\n  )\n}\n","import {View} from '@tarojs/components';\nimport {useAgreement} from \"../../hooks\";\n\nimport './index.scss'\n\nexport const AgreementEntry = () => {\n  const {goDetail} = useAgreement()\n\n\n  return (\n    <View className='agreement'>\n      注册和登录即代表同意 《<View className='link' onClick={goDetail.bind(null, 'xieyi')}>用户协议</View>》 和 《<View className='link' onClick={goDetail.bind(null, 'yinsi')}>隐私政策</View>》\n    </View>\n  )\n}\n","export * from './topLogo';\nexport * from './accountForm';\nexport * from './agreementEntry';\nexport * from './linkReg';\n","import {View} from '@tarojs/components';\nimport Taro from '@tarojs/taro';\n\nexport const LinkReg = () => {\n  const goReg = () => {\n    Taro.navigateTo({\n      url: 'account/register/index'\n    })\n  }\n\n  return (\n    <View onClick={goReg} style={{paddingRight: '10px'}}>注册</View>\n  )\n}\n","import {View} from '@tarojs/components';\n\nimport './index.scss';\n\nimport logo from './logo.png';\n\nexport const TopLogo = () => {\n  return (\n    <View className='topLogo'>\n      <View className='logo' style={{\n        backgroundImage: `url(${logo})`\n      }}\n      ></View>\n    </View>\n  )\n}\n","export * from './useAccountForm';\nexport * from './useCode';\nexport * from './useAgreement';\nexport * from './useAuth';\n","import {useState} from \"react\";\nimport {Form} from 'antd-mobile';\nimport Taro from '@tarojs/taro';\nimport {saveUmuserPhone, saveUmuserPhoneVCode, login, updateUmuserPw} from 'qj-b2c-api';\nimport {errorCallback} from '@brushes/request';\nimport {setStorage} from '@brushes/utils';\n\nexport const stackLength = () => {\n  const arr = Taro.getCurrentPages();\n  const obj = {\n    pageIndex: 0\n  }\n  for(let i=0; i<arr.length; i++) {\n    if(arr[i]['$taroPath'].indexOf('/account/')>=0) {\n      if(i===0) {\n        obj.pageIndex = 0\n      }else {\n        obj.pageIndex = arr.length-i\n      }\n      break\n    }\n  }\n  return obj.pageIndex;\n}\n\nexport const useAccountForm = (type?: string) => {\n  const [form] = Form.useForm();\n  const [submitLock, setSubmitLock] = useState(false);\n\n  const onFinish = async (formVal) => {\n    if (submitLock) return;\n    switch (type) {\n      case 'reg':\n        await regSubmit(formVal);\n        break;\n      case 'mobileLogin':\n        await mobileLoginSubmit(formVal);\n        break;\n      case 'accountLogin':\n        await accountLoginSubmit(formVal);\n        break;\n      case 'forgetPwd':\n        await forgetPwdSubmit(formVal);\n        break;\n    }\n  }\n\n  const regSubmit = async (formVal) => {\n    const params = {\n      userPhone: formVal.mobile,\n      code: formVal.code,\n      userPwsswd: formVal.password,\n      userinfoType: 1,\n      userName: formVal.mobile\n    }\n    try {\n      setSubmitLock(true)\n      await saveUmuserPhone(params);\n      Taro.navigateBack({\n        delta: 1\n      })\n    } catch (err) {\n      console.log(27, err);\n    } finally {\n      setSubmitLock(false)\n    }\n  }\n\n  const mobileLoginSubmit = async(formVal) => {\n    const params = {\n      userPhone: formVal.mobile,\n      code: formVal.code,\n      userinfoType: 1,\n    }\n    try {\n      setSubmitLock(true)\n      const result = await saveUmuserPhoneVCode(params);\n      setStorage('saas-token', result.dataObj.ticketTokenid)\n      Taro.navigateBack({\n        delta: stackLength(),\n        success: (res) => {\n          console.log('调用前', res);\n          errorCallback();\n        }\n      })\n    } catch (err) {\n      console.log(27, err);\n    } finally {\n      setSubmitLock(false)\n    }\n  }\n\n  const accountLoginSubmit = async (formVal) => {\n    const params = {\n      loginName: formVal.account,\n      passwd: formVal.password,\n      code: 1234\n    }\n    try {\n      setSubmitLock(true)\n      const result = await login(params);\n      setStorage('saas-token', result.dataObj.ticketTokenid);\n      Taro.navigateBack({\n        delta: stackLength(),\n        success: function () {\n          errorCallback()\n        }\n      })\n    } catch (err) {\n      console.log(27, err);\n    } finally {\n      setSubmitLock(false)\n    }\n  }\n\n  const forgetPwdSubmit = async (formVal) => {\n    console.log(70, formVal)\n    const params = {\n      userPhone: formVal.mobile,\n      code: formVal.code,\n      userPwsswd: formVal.password,\n    }\n    try {\n      setSubmitLock(true)\n      await updateUmuserPw(params);\n      Taro.navigateBack({\n        delta: 1,\n      })\n    } catch (err) {\n      console.log(27, err);\n    } finally {\n      setSubmitLock(false)\n    }\n  }\n\n\n\n\n  const goRegister = () => {\n    Taro.navigateTo({\n      url: 'account/register/index'\n    })\n  }\n\n  const goAccountLogin = () => {\n    Taro.navigateTo({\n      url: 'account/accountLogin/index'\n    })\n  }\n\n  const goMobileLogin = () => {\n    Taro.navigateTo({\n      url: 'account/mobileLogin/index'\n    })\n  }\n\n  const goForgetPwd = () => {\n    Taro.navigateTo({\n      url: 'account/forgetPwd/index'\n    })\n  }\n\n\n  return {\n    form,\n    onFinish,\n    goRegister,\n    goAccountLogin,\n    goMobileLogin,\n    goForgetPwd\n  }\n}\n","import {queryProappConfigByChannel} from 'qj-b2c-api';\nimport {useEffect, useRef, useState} from \"react\";\nimport Taro from '@tarojs/taro';\nimport {get} from 'lodash-es';\n\nexport const useAgreement = (type?:string) => {\n  const [agreementData, setAgreementData] = useState('');\n  const proappCode = useRef('');\n\n  useEffect(() => {\n    (async () => {\n      setProappCode()\n      const result = await queryProappConfigByChannel();\n      const resultArr = get(result, 'list');\n      for(let i =0; i< resultArr.length; i++) {\n        if(resultArr[i].proappCode === proappCode.current && resultArr[i].proappConfigType === type) {\n          setAgreementData(resultArr[i].proappConfigText2)\n          break;\n        }\n      }\n    })()\n  }, [])\n\n  const setProappCode = () => {\n    const platform = process.env.TARO_ENV;\n    switch (platform) {\n      case 'h5':\n        proappCode.current = '003';\n        break;\n      case 'weapp':\n        proappCode.current = '025';\n        break;\n    }\n  }\n\n  const goDetail = (agreeType: string) => {\n    Taro.navigateTo({\n      url: `/account/agreement/index?type=${agreeType}`\n    })\n  }\n\n\n  return {\n    agreementData,\n    goDetail\n  }\n}\n","import {useEffect, useState} from \"react\";\nimport Taro from \"@tarojs/taro\";\nimport {queryProappEnvPage, saveUmuserPhoneNoCodeByWX, warrantyLogin} from 'qj-b2c-api';\nimport { get } from 'lodash-es'\nimport {errorCallback} from '@brushes/request';\nimport {stackLength} from '@/account/hooks';\nexport const useAuth = () => {\n  const [bg, setBg] = useState('');\n  const [logo, setLogo] = useState('');\n  const [agree, setAgree] = useState(true);\n\n  useEffect(() => {\n    getInfo()\n  }, [])\n\n  const getInfo = async () => {\n    try {\n      const res = await queryProappEnvPage();\n      const result = res.list[0];\n      setBg(`https://www.${result.proappEnvDomain}${result.proappEnvIndexc}`);\n      setLogo(`https://www.${result.proappEnvDomain}${result.proappEnvLogo}`);\n    }catch (err) {\n      console.log(err)\n    }\n  }\n\n  const agreeFunc = (e) => {\n    if(e.detail.value.length) {\n      setAgree(true);\n    }else {\n      setAgree(false);\n    }\n  }\n\n  const getPhone = async (e) => {\n    Taro.login({\n      success: async (res) => {\n        const warrantyResult = await warrantyLogin({\n          'js_code': res.code\n        })\n\n        const { register, userInfo, userOpenid } = get(warrantyResult, 'dataObj');\n\n        if(register === 'true') {\n          const result = await registerImpl(e, userOpenid)\n          setAuthImpl(result.dataObj.ticketTokenid)\n          return\n        }\n\n        const user = JSON.parse(userInfo);\n        setAuthImpl(user.ticketTokenid);\n      }\n    })\n  }\n\n  const registerImpl = (e, userOpenid) => saveUmuserPhoneNoCodeByWX({\n    code: e.detail.code,\n    userOpenid\n  })\n\n  const setAuthImpl = (token) => {\n    Taro.setStorageSync('saas-token', token);\n    callback()\n  }\n\n  const callback = () => {\n    Taro.navigateBack({\n      delta: stackLength(),\n      success: function () {\n        errorCallback()\n      }\n    })\n  }\n\n  return {\n    bg,\n    logo,\n    agreeFunc,\n    setAgree,\n    agree,\n    getPhone\n  }\n}\n","import { get, noop } from 'lodash-es';\nimport {View} from '@tarojs/components';\nimport * as materials from 's-material-react';\nimport Taro from \"@tarojs/taro\";\nimport {useMemo} from 'react';\n\nconst env = Taro.getEnv()\nconst DynamicComponent = ({node, base, topPage, ...rest}: { node: Array<any>; [v: string]: unknown }) => {\n  const safeArea = Taro.getStorageSync('safeArea');\n  const tabBarH = useMemo(() => {\n    let heightDefault = 0\n\n    // h5 非tab页面\n    if (env === 'WEB' && !topPage) {\n      heightDefault = 37\n    }\n\n    return topPage ? Taro.getStorageSync('tabBarHeight') : heightDefault;\n  }, [])\n\n  return (\n    <>\n      {\n        node.map(({id, props = {}, type}) => {\n          const MaterialsComponent = get(materials, type, noop);\n          return (\n            <View key={id} className='monitor-node' style={{\n              height: base ? '' : `calc(100vh - ${safeArea}px - ${tabBarH}px)`\n            }}\n            >\n              <View className='content' style={{height: '100%'}}>\n                <MaterialsComponent {...props} {...rest} />\n              </View>\n            </View>\n          );\n        })\n      }\n    </>\n  )\n}\n\nexport default DynamicComponent;\n","import {ReactNode, useEffect, useMemo, useState} from 'react';\nimport {navigatorBackImpl, navigatorImpl} from '@brushes/utils';\nimport {IconMobile} from '@brushes/simulate-component';\nimport {View} from '@tarojs/components';\nimport Taro, {useRouter} from '@tarojs/taro';\nimport {last} from 'lodash-es';\nimport {isTopPage} from \"@/utils\";\nimport './header.scss';\n\nconst env = Taro.getEnv()\nconst HeaderJsx = ({slot}: { slot?: ReactNode }) => {\n  const [title, setTitle] = useState();\n  const {path} = useRouter();\n\n  const isHiddenHeader = useMemo(() => {\n    if (env === 'WEAPP') return true;\n    return /^\\/pages/.test(path)\n  }, [path])\n\n  useEffect(() => {\n    const lastConfig = last(Taro.getCurrentPages())\n    const {navigationBarTitleText} = lastConfig.config;\n    setTitle(navigationBarTitleText);\n  }, [path])\n\n  const navigatorHandler = () => {\n    const flag = isTopPage();\n    if(flag) {\n      navigatorImpl('/pages/index/index')\n      return\n    }\n    navigatorBackImpl(-1)\n  }\n\n  return (\n    <>\n      {isHiddenHeader ? null :\n        <View className='header'>\n          <IconMobile style={{fontSize: 20}} value='xiangzuo' onClick={navigatorHandler} />\n          <View className='title'>{title}</View>\n          <View>{slot}</View>\n        </View>\n      }\n    </>\n  )\n}\n\nexport default HeaderJsx;\n","import {usePageConfig} from '@/hooks';\nimport {View} from '@tarojs/components';\nimport HeaderJsx from '@/components/header';\nimport DynamicComponent from './dynamicComponent';\n\nconst CommonJsx = ({route, ...rest}: { route : string; [v:string]: any}) => {\n  const node = usePageConfig(route);\n  return (\n    <View className='wrapper'>\n      <HeaderJsx />\n      <DynamicComponent node={node} {...rest} />\n    </View>\n  )\n}\n\nexport default CommonJsx;\n","export const menuDefaultValue = {\n  \"/pages/index/index\": {\n    menuJspath: '/pages/index/index',\n    selectedIconPath: '../images/tabbar_home_on.png',\n    iconPath: '../images/tabbar_home.png',\n  },\n  \"/pages/classify/index\": {\n    menuJspath: '/pages/classify/index',\n    selectedIconPath: '../images/tabbar_cate_on.png',\n    iconPath: '../images/tabbar_cate.png',\n  },\n  \"/pages/shopping/index\": {\n    menuJspath: '/pages/shopping/index',\n    selectedIconPath: '../images/tabbar_cart_on.png',\n    iconPath: '../images/tabbar_cart.png',\n  },\n  \"/pages/my/index\": {\n    menuJspath: '/pages/my/index',\n    selectedIconPath: '../images/tabbar_my_on.png',\n    iconPath: '../images/tabbar_my.png',\n  },\n}\n","export * from './usePageConfig'\nexport * from './useMountedRef';\nexport * from './useMenu'\n","import {useEffect, useState} from 'react';\nimport Taro from '@tarojs/taro';\nimport {queryTginfoMenuTree} from 'qj-b2c-api';\nimport {menuDefaultValue} from '@/custom-tab-bar/basic';\nimport {errMessage} from '@/utils/message';\n\nexport function useMenu() {\n  const [menuList, setMenuList] = useState([]);\n  const [activePath, setPath] = useState();\n  useEffect(() => {\n    console.log(15);\n    // @ts-ignore\n    (async () => {\n      const menuData = Taro.getStorageSync('taroMenu')\n      if(menuData) {\n        setMenuList(menuData);\n        initPath()\n        return;\n      }\n      try {\n        const menu = await loadMenu()\n        setMenuList(menu);\n        initPath();\n      } catch (err) {\n\n      }\n\n    })()\n\n  }, []);\n\n  const initPath = () => {\n    const { path = '/pages/index/index' } = Taro.getCurrentInstance().router;\n    setPath(path)\n  }\n\n  return {\n    menuList,\n    activePath\n  }\n}\n\n\nexport async function loadMenu() {\n  const result = await queryTginfoMenuTree({\n    proappCode: '025',\n    rows: 30,\n    page: 1\n  })\n  const menu = result.map(item => {\n    return {\n      ...menuDefaultValue[item.menuJspath],\n      text: item.tginfoMenuName,\n      menuOpcode: item.menuOpcode\n    }\n  })\n  if([[], undefined, null, ''].includes(menu)) {\n    errMessage('租户菜单配置不正确')\n    return;\n  }\n  Taro.setStorageSync('taroMenu', menu);\n  Taro.setStorageSync('menu', menu.concat(result[0].children));\n  return menu;\n}\n","import { useEffect, useRef } from 'react';\n\nexport const useMountedRef = () => {\n  const isMounted = useRef(false);\n  useEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n\n  return isMounted;\n};\n","import {useEffect, useState} from 'react';\nimport {isEmpty, get} from 'lodash-es';\nimport Taro from '@tarojs/taro';\nimport {getPfsModelTagValueByTginfo} from 'qj-b2c-api';\nimport {useMenuGraph, menuGraph} from '@/utils/menuData';\nimport {loadMenu} from './useMenu';\nimport {errMessage} from '@/utils/message';\nexport function usePageConfig(route: string) {\n  const [node, setNode] = useState([]);\n  const menuRx = useMenuGraph(route);\n\n  useEffect(() => {\n    (async () => {\n      const menuOpcode = await init(route)\n      const isExister = menuGraph.get(route);\n\n      if(isExister && !isEmpty(isExister.lowCodeGraph)) {\n        const nodeResource = isExister.lowCodeGraph;\n        setNode(nodeResource.nodeGraph)\n        return;\n      }\n      console.log(menuOpcode)\n      const pageConfig = await getPfsModelTagValueByTginfo({\n        menuOpcode: menuOpcode,\n        proappCode: '025'\n      });\n\n      const dataStr = get(pageConfig, 'modelTagvalueJson', '{}')\n      let data = JSON.parse(dataStr);\n      if(!data.hasOwnProperty('nodeGraph')) {\n        errMessage('脏数据, 初始化默认数据');\n\n        data = {\n          nodeGraph: [],\n          page: '',\n          version: '',\n          pageConfig: {}\n        }\n      }\n      menuRx.init(data);\n      setNode(data.nodeGraph)\n    })()\n  }, [route]);\n\n\n  async function init(path: string) {\n    let menu = Taro.getStorageSync('menu') || [];\n    if(isEmpty(menu)) {\n      menu = await loadMenu()\n    }\n    const {menuOpcode} = menu.find(item => path.includes(item.menuJspath)) || {};\n\n    if(!menuOpcode) {\n      errMessage('菜单配置有问题');\n      return;\n    }\n    return menuOpcode\n  }\n\n  return node\n}\n\n","import Taro from '@tarojs/taro';\nimport { warrantyLogin } from 'qj-b2c-api';\nimport {get} from 'lodash-es';\n\nasync function checkSession(){\n  return new Promise((resolve, reject) => {\n    Taro.checkSession({\n      success() {\n        return resolve(true)\n      },\n      fail() {\n        return resolve(false)\n      }\n    })\n  })\n}\n\nasync function bindSeller() {\n  const token = Taro.getStorageSync('saas-token')\n  const referrer = Taro.getStorageSync('referrer')\n  if (!token) {\n    return\n  }\n  if (!referrer) {\n    return\n  }\n  // const res = await WXAPI.bindSeller({\n  //   token,\n  //   uid: referrer\n  // })\n}\n\n// 检测登录状态，返回 true / false\nasync function checkHasLogined() {\n  const token = Taro.getStorageSync('saas-token')\n  if (!token) {\n    return false\n  }\n  const loggined = await checkSession()\n  if (!loggined) {\n    Taro.removeStorageSync('saas-token')\n    return false\n  }\n  // const checkTokenRes = await WXAPI.checkToken(token)\n  // if (checkTokenRes.code != 0) {\n  //   wx.removeStorageSync('token')\n  //   return false\n  // }\n  return true\n}\n\nasync function wxaCode(){\n  return new Promise((resolve, reject) => {\n    Taro.login({\n      success(res) {\n        return resolve(res.code)\n      },\n      fail() {\n        Taro.showToast({\n          title: '获取code失败',\n          icon: 'none'\n        })\n        return resolve('获取code失败')\n      }\n    })\n  })\n}\n\nexport function login(bindImpl){\n  return new Promise((resolve, reject) => {\n    Taro.login({\n      success: function (result) {\n        warrantyLogin({\n          js_code: result.code\n        }).then(function (res) {\n          // 异常情况\n          if (!res.dataObj) {\n            // 登录错误\n            Taro.showToast({\n              title: '无法登录',\n              icon: \"error\",\n              duration: 1500\n            })\n            reject()\n            return;\n          }\n\n          const isReister = get(res, 'dataObj.register', \"\");\n          const userOpenid = get(res, 'dataObj.userOpenid', \"\");\n          Taro.setStorageSync('userOpenid', userOpenid)\n\n          if (isReister === \"true\") {\n            // 去绑定\n            bindImpl()\n            return;\n          }\n\n          const token = get(res, 'dataObj.userInfo', \"{}\");\n          Taro.setStorageSync('saas-token', token)\n          resolve('')\n        })\n      }\n    })\n  })\n\n}\n\nasync function authorize() {\n  // const code = await wxaCode()\n  // const resLogin = await WXAPI.login_wx(code)\n  // if (resLogin.code == 0) {\n  //   wx.setStorageSync('token', resLogin.data.token)\n  //   wx.setStorageSync('uid', resLogin.data.uid)\n  //   return resLogin\n  // }\n  return new Promise((resolve, reject) => {\n    Taro.login({\n      success: function (res) {\n        const code = res.code\n        let referrer = '' // 推荐人\n        let referrer_storge = wx.getStorageSync('referrer');\n        if (referrer_storge) {\n          referrer = referrer_storge;\n        }\n        // 下面开始调用注册接口\n        const extConfigSync = wx.getExtConfigSync()\n        if (extConfigSync.subDomain) {\n          WXAPI.wxappServiceAuthorize({\n            code: code,\n            referrer: referrer\n          }).then(function (res) {\n            if (res.code == 0) {\n              wx.setStorageSync('token', res.data.token)\n              wx.setStorageSync('uid', res.data.uid)\n              resolve(res)\n            } else {\n              wx.showToast({\n                title: res.msg,\n                icon: 'none'\n              })\n              reject(res.msg)\n            }\n          })\n        } else {\n          WXAPI.authorize({\n            code: code,\n            referrer: referrer\n          }).then(function (res) {\n            if (res.code == 0) {\n              wx.setStorageSync('token', res.data.token)\n              wx.setStorageSync('uid', res.data.uid)\n              resolve(res)\n            } else {\n              wx.showToast({\n                title: res.msg,\n                icon: 'none'\n              })\n              reject(res.msg)\n            }\n          })\n        }\n      },\n      fail: err => {\n        reject(err)\n      }\n    })\n  })\n}\n\nfunction loginOut(){\n  Taro.removeStorageSync('token')\n  Taro.removeStorageSync('uid')\n}\n\nasync function checkAndAuthorize (scope) {\n  return new Promise((resolve, reject) => {\n    Taro.getSetting({\n      success(res) {\n        if (!res.authSetting[scope]) {\n          Taro.authorize({\n            scope: scope,\n            success() {\n              resolve() // 无返回参数\n            },\n            fail(e){\n              console.error(e)\n              // if (e.errMsg.indexof('auth deny') != -1) {\n              //   wx.showToast({\n              //     title: e.errMsg,\n              //     icon: 'none'\n              //   })\n              // }\n              Taro.showModal({\n                title: '无权操作',\n                content: '需要获得您的授权',\n                showCancel: false,\n                confirmText: '立即授权',\n                confirmColor: '#e64340',\n                success(res) {\n                  Taro.openSetting();\n                },\n                fail(e){\n                  console.error(e)\n                  reject(e)\n                },\n              })\n            }\n          })\n        } else {\n          resolve() // 无返回参数\n        }\n      },\n      fail(e){\n        console.error(e)\n        reject(e)\n      }\n    })\n  })\n}\n\nconst mobileRex = /^1[3456789]\\d{9}$/\n\nexport default {\n  checkHasLogined,\n  // wxaCode: wxaCode,\n  // login: login,\n  // loginOut: loginOut,\n  checkAndAuthorize,\n  // authorize: authorize,\n  // bindSeller: bindSeller\n  mobileRex\n}\n","export { default as auth } from './auth';\nexport * from './validator';\nexport * from './safeArea';\nexport * from './router';\n","export const defaultPageValue = {};\n\nexport interface NodeGraph {\n  type: string;\n  id: number;\n  props: { [v: string]: unknown };\n}\n\nexport interface PageMaterialType {\n  nodeGraph?: Array<NodeGraph>;\n  page?: string;\n  version?: string;\n  pageConfig?: { [v: string]: unknown };\n}\n\nclass MenuModal {\n  // 数据\n  lowCodeGraph: PageMaterialType;\n\n  constructor(defaultValue: PageMaterialType) {\n    this.lowCodeGraph = defaultValue;\n  }\n\n  init(value: PageMaterialType) {\n    this.lowCodeGraph = value;\n  }\n}\n\n\nexport const menuGraph = new Map<string, MenuModal>();\n\nlet prevMenuId = '';\n\nexport const useMenuGraph = (modeId = prevMenuId, defaultValue = defaultPageValue) => {\n  const expId = (prevMenuId = modeId.toString());\n  let existedGraph = menuGraph.get(expId);\n  if (!existedGraph) {\n    existedGraph = new MenuModal(defaultValue);\n    menuGraph.set(expId, existedGraph);\n  }\n  return existedGraph;\n};\n","import Taro from '@tarojs/taro';\n\nexport const sucMessage = (res) => {\n  Taro.showToast({\n    title: res.msg,\n    icon: 'success',\n    duration: 1000\n  })\n}\n\n\nexport const errMessage = (err) => {\n  Taro.showToast({\n    title: err,\n    icon: 'error',\n    duration: 1500\n  });\n}\n","import Taro from '@tarojs/taro';\n\nexport const isTopPage = () => {\n  const pageLength = Taro.getCurrentPages().length;\n  return pageLength === 1;\n}\n","import Taro from \"@tarojs/taro\";\n\nexport const safeArea = () => {\n  try {\n    const systemInfo = Taro.getSystemInfoSync();\n    const screenHeight = systemInfo.screenHeight;\n    const safeHeight = systemInfo.safeArea?.bottom || systemInfo.screenHeight;\n    const screenWidth = systemInfo.screenWidth;\n    Taro.setStorageSync('safeArea', screenHeight - safeHeight);\n    Taro.setStorageSync('tabBarHeight', Math.floor(50 * screenWidth / 375))\n  } catch (e) {\n    console.log(e)\n  }\n}\n","\n\nexport const checkMobile = (_: any, value: string) => {\n  if (/^1[3456789]\\d{9}$/.test(value)) {\n    return Promise.resolve()\n  }\n\n  return Promise.reject({ required: true, message: \"请输入正确手机号\" })\n}\n\nexport const mobileRex = /^1[3456789]\\d{9}$/;\n","/* (ignored) */"],"names":[],"sourceRoot":""}